<%args>
    $sogoPort
    $sogoLogFile
    $sogoPidFile
    $sogoTimeZone
    $sogoMailDomain

    $imapServer
    $smtpServer
    $sieveServer

    $dbName
    $dbUser
    $dbPass
    $dbHost
    $dbPort

    $ldapBaseDN
    $ldapBindDN
    $ldapBindPwd
    $ldapHost
</%args>
<%init>
</%init>
{
    /*
     * Generated by Zentyal
     *
     * NOTE:
     * ~/GNUstep/Defaults/.GNUstepDefaults has precedence over this
     * file for some parameters
     *
     */


    /* General parameters */
    WOPort = <% $sogoPort %>;
    WOLogFile = <% $sogoLogFile %>;
    WOPidFile = <% $sogoPidFile %>;
    SOGoTimeZone = <% $sogoTimeZone %>;
    SOGoMailDomain = <% $sogoMailDomain %>;
    SOGoPasswordChangeEnabled = NO;
    SOGoLanguage = English;                 // User can override parameter

    /* Mail preferences */
    SOGoAppointmentSendEMailNotifications = YES;
    SOGoACLsSendEMailNotifications = NO;

    /* Database configuration */
    SOGoProfileURL = "mysql://<% $dbUser %>:<% $dbPass %>@<% $dbHost %>:<% $dbPort %>/<% $dbName %>/sogo_user_profile";
    OCSFolderInfoURL = "mysql://<% $dbUser %>:<% $dbPass %>@<% $dbHost %>:<% $dbPort %>/<% $dbName %>/sogo_folder_info";
    OCSSessionsFolderURL = "mysql://<% $dbUser %>:<% $dbPass %>@<% $dbHost %>:<% $dbPort %>/<% $dbName %>/sogo_sessions_folder";

    /* Common IMAP and SMTP configuration */
    SOGoForceExternalLoginWithEmail = YES;

    /* IMAP server configuration */
    NGImap4ConnectionStringSeparator = "/";
    SOGoIMAPAclConformsToIMAPExt = NO;
    SOGoMailSpoolPath = /var/spool/sogo;
    SOGoIMAPServer = <% $imapServer %>;
    SOGoSieveServer = <% $sieveServer %>;
    SOGoDraftsFolderName = Drafts;          // User can override parameter
    SOGoSentFolderName = Sent;              // User can override parameter
    SOGoTrashFolderName = Trash;            // User can override parameter
    SOGoMailShowSubscribedFoldersOnly = NO; // User can override parameter

    /* SMTP server configuration */
    SOGoMailingMechanism = smtp;
    SOGoSMTPServer = <% $smtpServer %>;

    /* Sieve configuration */
    SOGoVacationEnabled = YES;
    SOGoSieveScriptsEnabled = YES;
    SOGoForwardEnabled = YES;

    /* LDAP authentication */
    SOGoUserSources = (
        {
            type = ldap;
            CNFieldName = cn;
            IDFieldName = uid;
            UIDFieldName = uid;
            hostname = "<% $ldapHost %>";
            baseDN = "ou=Users,<% $ldapBaseDN %>";
            bindDN = "<% $ldapBindDN %>";
            bindFields = (uid, mail);
            bindPassword = "<% $ldapBindPwd %>";
            canAuthenticate = YES;
            id = login;
            isAddressBook = NO;
        },
        {
            type = ldap;
            CNFieldName = cn;
            IDFieldName = mail;
            UIDFieldName = mail;
            hostname = "<% $ldapHost %>";
            baseDN = "<% $ldapBaseDN %>";
            bindDN = "<% $ldapBindDN %>";
            bindPassword = "<% $ldapBindPwd %>";
            canAuthenticate = NO;
            displayName = "Shared Contacts";
            id = sharedContacts;
            isAddressBook = YES;
            mapping = {
                displayname = ("cn");
            };
            filter = "((((objectClass=inetOrgPerson) AND ((uidNumber>=2000) OR (mail=\'*\'))) AND (NOT internal=1) AND (NOT uid=Guest)) OR (((objectClass=zentyalDistributionGroup) AND (gidNumber>=2000)) AND (NOT internal=1)))";
        }
    );

    /* Debug */
    GCSFolderDebugEnabled = NO;
    GCSFolderStoreDebugEnabled = NO;
    LDAPDebugEnabled = NO;
    MySQL4DebugEnabled = NO;
    NGImap4DisableIMAP4Pooling = NO;
    OCSFolderManagerSQLDebugEnabled = NO;
    PGDebugEnabled = NO;
    SOGoDebugRequests = NO;
    SOGoMailKeepDraftsAfterSend = NO;
    SOGoUIxDebugEnabled = NO;
    SoDebugObjectTraversal = NO;
    SoSecurityManagerDebugEnabled = NO;
    WODontZipResponse = NO;
    WODebugZipResponse = NO;
}
