#### Modificar syslinux.cfg.

# La primera orden a ejecutar tan pronto como sea posible, después de que
# se lea el fichero de preconfiguración:
#d-i    preseed/early_command          string whatever
#
# Ésta orden se ejecuta justamente antes de que finalize la instalación,
# pero cuando todavía existe un directorio /target usable:
#d-i    preseed/late_command            string rm -f /target/usr/sbin/sendmail ; /target/usr/bin/dpkg-deb --fsys-tarfile /cdrom/dists/local/local/binary-i386/postfix_*_i386.deb | tar x -C /target ./usr/sbin/sendmail ; cp /cdrom/inittab /target/etc/inittab.ebox
d-i    preseed/late_command            string rm -f /target/usr/sbin/sendmail ; /target/usr/bin/dpkg-deb --fsys-tarfile /cdrom/dists/local/local/binary-i386/postfix_*_i386.deb | tar x -C /target ./usr/sbin/sendmail ; cp /cdrom/ebox/inittab /target/etc/inittab ; cp /cdrom/ebox/locale.gen /target/var/tmp/ ; cp /cdrom/ebox/config-base.sh /target/var/tmp/ ; cp /cdrom/ebox/sources.list /target/etc/apt/sources.list.ebox ; cp /cdrom/dists/sarge/local/binary-i386/ebox-*.deb /target/var/tmp/; cat /cdrom/ebox/motd >> /target/etc/motd

#
# Ésta orden se ejecuta tan pronto como se inicie base-config:
#base-config    base-config/early_command      whatever
#
# Ésta orden se ejecuta después de que finalice base-config, y
# antes de presentar el indicador «login:». Ésta es una buena forma de
# instalar el conjunto de paquetes que desea, o de modificar la
# configuración del sistema:
base-config    base-config/late_command        string sh /var/tmp/config-base.sh && rm -f /var/tmp/config-base.sh

#### Configuración de red.

# netcfg elegirá una interfaz que en lo posible tenga conexión. Esto
# hace que se evite mostrar una lista si existe más de una interfaz.
d-i    netcfg/choose_interface select auto

# En caso prefiera configurar la red manualmente, puede hacer lo siguiente:
#d-i    netcfg/disable_dhcp    boolean true

# Descomentar para establecer una IP fija por defecto:
#d-i    netcfg/get_ipaddress    string 192.168.1.42
#d-i    netcfg/get_netmask      string 255.255.255.0
#d-i    netcfg/get_gateway      string 192.168.1.1
#d-i    netcfg/get_nameservers  string 192.168.1.1
#d-i    netcfg/confirm_static  boolean true

# Note que cualquier nombre de máquina o dominio asignado desde dhcp
# tomará precedencia sobre los valores definidos aquí. Sin embargo, 
# el hacerlo evita que se muestren las preguntas incluso si los 
# valores vienen desde dhcp.
#d-i    netcfg/get_hostname    string unassigned-hostname
#d-i    netcfg/get_domain      string unassigned-domain

# Deshabilita el molesto cuadro de dialogo de clave WEP
#d-i    netcfg/wireless_wep    string 

#### Configuración de servidor de espejo (réplica)

d-i    mirror/country          string enter information manually
d-i    mirror/http/hostname    string ftp.fi.debian.org
d-i    mirror/http/directory  string /debian
d-i    mirror/suite            string sarge
d-i    mirror/http/proxy      string 

### Particionado.

# Alternativamente, puede especificar un disco a particionar. El nombre del
# dispositivo se puede ingresar tanto en formato tradicional o en devfs.
# Por ejemplo, para usar el primer disco devfs:
#d-i    partman-auto/disk      string /dev/discs/disc0/disc

# O ingrese una receta propia...
# El formato de la receta esta documentado en el fichero 
# devel/partman-auto-recipe.txt.
# Si tiene una forma de colocar el fichero de receta dentro del entorno
# del d-i, simplemente puede direccionarlo a éste.
#d-i    partman-auto/expert_recipe_file string /cdrom/ebox/recipe

# Lo siguiente hace que partman particione automáticamente sin confirmación.
#d-i  partman/confirm_write_new_label boolean true
#d-i  partman/choose_partition    select Finish partitioning and write changes to disk
#d-i  partman/confirm              boolean true

#### Instalación del gestor de arranque.

d-i    grub-installer/only_debian      boolean true

##### Final de la primera fase de instalación.

# Evitar el mensaje final sobre la finalización de la instalación.
d-i    prebaseconfig/reboot_in_progress        note 


##### base-config de preconfiguración.
# XXX: Note que la mayoría de las siguientes configuraciones no funcionarán
# hasta que este disponible la versión 2.40.4 de base-config.

# Evitar el mensaje de bienvenida.
base-config    base-config/intro      note 

# Evitar el mensaje final.
base-config    base-config/login      note Ha instalado con exito eBox platform

###### Configuración de zona horaria.

# Controla si el reloj de hardware está configurado a GMT o no.
base-config    tzconfig/gmt            boolean true
#base-config    tzconfig/choose_country_zone/EU select Madrid
#base-config    tzconfig/choose_country_zone_single boolean true

###### Configuración de cuenta.

# Para preconfigurar la clave de superusuario (root), debe colocarla en
# texto legible en este fichero. Esta no es una buena idea, ¡usela con
# precaución!
#passwd        passwd/root-password            password r00tme
#passwd        passwd/root-password-again      password r00tme

# Si desea saltar la creación de una cuenta de usuario común.
passwd        passwd/make-user                boolean false
# Alternativamente, puede preconfigurar el nombre del usuario. Note que
# el usuario asignado será derivado de éste; actualmente no puede ser
# modificado. El usuario asignado será (en minúsculas) el primer nombre
# del nombre completo.
#passwd        passwd/user-fullname            string Usuario de Debian
#passwd        passwd/username                string debian
# Y su clave, ¡pero uselo con precaución!
#passwd        passwd/user-password            password inseguro
#passwd        passwd/user-password-again      password inseguro

###### Configuración de Apt.

# Esta pregunta controla que fuente usará la segunda fase de la 
# instalación para obtener paquetes. Las opciones son cdrom, http, ftp, 
# filesystem y editar la lista en forma manual.
base-config    apt-setup/uri_type      select cdrom

# Si elige ftp o http, se le preguntará el país y un servidor espejo.
base-config    apt-setup/country      select enter information manually
base-config    apt-setup/hostname      string ftp.es.debian.org
base-config    apt-setup/directory    string /debian
# Para luego de elegir un servidor espejo.
base-config    apt-setup/another      boolean false
base-config    apt-setup/cd/another	boolean	false

# Puede elegir instalar software desde «non-free» y «contrib».
base-config    apt-setup/non-free      boolean false
base-config    apt-setup/contrib      boolean false

# Habilitar actualizaciones de seguridad.
base-config    apt-setup/security-updates      boolean false

debconf        debconf/priority	select high

###### Selección de paquetes.

# Puede elegir instalar cualquier combinación de paquetes que este
# disponible. Las tareas disponibles al momento de escribir este fichero
# incluyen: Entorno de escritorio, Servidor web, Servidor de impresión, 
# Servidor DNS, Servidor de ficheros, Servidor de correos, Base de datos,
# Selección manual de paquetes. La última de éstas ejecutará aptitude.
# También puede elegir el no instalar tareas y forzar la instalación de
# un conjunto de paquetes de alguna otra manera.

tasksel        tasksel/first  multiselect
