<chapter id="ch-ca">
  <title>Certification Authority Management</title>

  <section id="sect-ca-prereq">
    <title>Prerequisites</title>
    <para>
      A basic knowledge of public key infrastructures is needed to 
      understand this module.
      You can find a good introduction in <ulink
      url="http://en.wikipedia.org/wiki/Public_key_infrastructure">the wikipedia article
      about PKI.</ulink>
    </para>
  </section>


  <section id="sect-ca-overview">
    <title>Overview of Certification Authority Management</title>
    <para>
      You can get to Certification Authority (<acronym>CA</acronym>) 
      Management at
      <menuchoice>
	<guimenu>Certificate Manager</guimenu>
      </menuchoice>
    </para>

    <para>
      The CA Management purpose is to allow the issue of certificates, 
      which can be used by another eBox modules or external applications.
    </para>
    <para>
      The certificates are issued using a CA's
      certificate which will be created with this module.
    </para>
  </section>
  <section id="sect-create-ca">				      
    <title>CA's certificate creation</title>
    <para>
      Firstly, in order to use certificate, issuing the CA's certificate
      is needed signing by itself. This certificate is used to
      issue 'normal' certificates, so the other module's features would
      not be available until it exists.
    </para>
    
    <para>
       To achieve so, we enter in the module's page and we find
       a form to create the CA's certificate.
       The form requires the organization's name and the number of
       days till the certificate expires.
    </para>
    <warning>
      <para>
	Establishing certificate's life, we have to keep in
	mind that its expiration will also expire any certificate
	issued with it.
	This would stop any service which depends on the revoked certificates.
      </para> 
    </warning>
    
  </section>

  <section id="sect-create-certificate">
    <title>Certificates creation</title>
    <para>
      Once the CA's certificate is in place, we are
      able to issue new certificates with it.
    </para>
    <para>
      In order to do so, we fill the form which appears on the top of
      the module's page.
      The mandatory data are the certificate's common name and the
      number of days until its expiration. This last value is limited by
      the duration of the CA's certificate.
    </para>
    <para>
      When the certificate has been issued, it will appear in the
      certificate's list and it will be available to the remainder eBox
      modules to use it.
    </para>
  </section>
      
  <section id="sect-certificate-actions">
    <title>Actions upon certificates</title>
    <para>
      Through the certificate's list we can access to actions which can
      be done upon each certificate.
      The actions available are <link linkend="sect-certificate-actions-download">download files</link>, 
      <link linkend="sect-certificate-actions-revoke">revoke</link> 
      and <link linkend="sect-certificate-actions-renew">renew</link>.
    </para>

    <section id="sect-certificate-actions-download">
      <title>Download files</title>
      <para>
	Clicking in the download icon we will get a compressed
	archive which contains both the certificate and his public and
	private keys.
	In the case of certification authority's certificate, the
	private key is not supplied in the archive.
      </para>
    </section>
      
    <section id="sect-certificate-actions-revoke">
      <title>Revoke</title>
      <para>
	Through the revoke icon, we can revoke any certificate.
	After clicking it, we find another form in which we can
	specify the revocation reason or cancel the action.
      </para>
      <para>
	Once a certificate is revoked, it will appear in the list but
	marked as revoked. However, it could not be used by other eBox
	modules or any external application.
      </para>
      <warning>
	<para>
	  In case the revoked certificate is the CA's certificate, 
	  all certificates generated with the certificate will be 
	  automatically revoked.
	</para>
      </warning>
    </section>

    <section id="sect-certificate-actions-renew">
      <title>Renew</title>
      <para>
	You can renew certificates using the renew icon. You are
	asked about the new certificate's duration.
      </para>
      <para>
	When renewing a certificate, a revocation and an issue of the new
	certificate with the same data is done.
	The eBox modules will be automatically get the new certificate
	but you will need to supply it manually to external applications.
      </para>
      <warning>
	<para>
	  If you renew the CA's certificate, all
	  the certificates created with it will be also automatically renewed
	  until at much the CA's certificate expiration date.
	</para>
      </warning>
    </section>

  </section>


</chapter>