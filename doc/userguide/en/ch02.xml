<chapter id="ch-system">
	<title>System configuration</title>

	<section id='sect-ebox-general'>
		<!-- System->General -->
		<title>User interface general configuration</title>

		<para>Interface general configuration is accessed through
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>General</guimenuitem>
			</menuchoice>
		from the left menu.
		</para>

		<para>From this section you can make three major changes over
		the eBox management interface:</para>
			
		<variablelist>
			<varlistentry>
				<term>Password change</term>
				<listitem>
					<para>It allows the password modification to
					administrate eBox.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Language Selection</term>
				<listitem>
					<para>eBox can show its information on
					different languages. You could choose them here.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Management interface TCP Port</term>
				<listitem>
					<para>TCP Port where eBox management interface
					is bound.</para>
				</listitem>
			</varlistentry>
		</variablelist>

		
		<section id="passwd-change-sect">
			<title>Password change</title>
			<para>To change your password, you should enter current
			password, for security reasons, and the new one twice, so it
			can be confirmed. Next, you have to accept the input data and
			not forgive that it's mandatory to save changes, using the
			upper menu, to make them definitive.</para>
		</section>

		<section id="lang-change-sect">
			<title>Language selection</title>
			<para>Select your preferred language from the
			list and confirm your changes by submitting the
			form. This time won't be necessary to "Save
			Changes" to make it effective.</para>
		</section>

		<section id="management-port-sect">
			<title>Management Interface TCP Port</title>
			<para>If the port value is changed to something different to
			443, form is submitted and changed are saved, you will be able
			to access to eBox typing: <ulink
			url="#">https://hostname:PORT/eBox</ulink> on your browser,
			with PORT as the new PORT value. For instance:
			<ulink url="#">https://www.warp.es:444/eBox</ulink>.</para>
			<note>
				<para>Please, remember that after saving changes of
				the management interface port, some seconds are needed
				before eBox can work on the new port.</para>
			</note>
		</section>
	</section>

	<section id='sect-ebox-backup'>
		<!-- System->Backup -->
		<title>Backup</title>

		<para>You can get eBox backups management through
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>Backup</guimenuitem>
			</menuchoice>
		from the left menu.
 		</para>

		<para>From the backup page, you can make a copy of the last saved
		eBox state or restore previous saved backups. Two
		backup modes are available in eBox which are described
		below.</para>

		<section id="backup-modes-sect">
		  <title>Backup modes</title>
		  <variablelist>
		    <varlistentry>
		      <term>Configuration Backup</term>
		      <listitem>
			<para>Backs up only the configuration from
			eBox including all managed services. Its size
			could be a few KBs.</para>
		      </listitem>
		    </varlistentry>
		    <varlistentry>
		      <term>Full Backup</term>
		      <listitem>
			<para>Backs up the eBox configuration and
			other data which are not necessary for eBox to
			work. For example, it stores files from shared
			directories or log messages. Its size is larger than
			previous mode and can occupy GBs. It can be
			used to restore only configuration part
			because it is wrapped inside.</para>
		      </listitem>
		    </varlistentry>
		  </variablelist>
		</section>

		<section id="saving-sect">
			<title>Saving your current state</title>
			<para>Both backup modes need a description and
			can be stored in hard disk or in a removable
			device such as CD and DVD.</para>
			
			<para>In first case, when backup is done,
			a new entry will appear on the backups'
			list, showing date, description and possible
			actions related to the recent backup.</para>

			<para>If you want to save a copy in a CD/DVD, you
			should have a writer installed in your eBox
			machine and enter a blank or re-writable
			disk. This backup will be stored in the disk
			and it won't appear in backup list
			anymore.</para>

			<note>
				<para>It is important to remember that the
				backed up configuration is the last saved
				configuration through the top-right
				"Save changes" button.</para>
				<para>If you insert a re-writable
				CD/DVD, the content which remained
				inside would be replaced with the eBox
				backup.</para>
			</note>
		</section>
		<section id="backup-restore-sect">
			<title>Backup Restore</title> 
			<para>There are three different ways to
			restore a backup.</para>
			<orderedlist>
			  <listitem>
			    <para>You can recover an eBox backup from
			    a file browsing in your own system
			    clicking <guilabel>Browse...</guilabel> and
			    do restore after setting an eBox backup
			    file.</para>
			  </listitem>
			  <listitem>
			    <para>The eBox backup can be stored
			    in a removable disk as well. After
			    inserting a CD/DVD with an eBox backup,
			    with <guilabel>Restore from
			    disk</guilabel> the eBox saved state in
			    this kind of storage devices can be
			    restored.</para>
			  </listitem>
			  <listitem>
			    <para>Finally, an eBox backup can be
			    restored from the backups' list which is
			    explained in detail in <xref
			    linkend="backupList" />.</para>
			  </listitem>
			</orderedlist>
			<para>In order to restore a backup, two
			different restore mode can be done:</para>
			<orderedlist>
			  <listitem>
			    <para>Full Restore: Available from a full
			    backup mode, everything kept in
			    this backup can be restored. </para>
			  </listitem>
			  <listitem>
			    <para>Configuration Restore: Available
			    from both backup modes. It just restores
			    the configuration state for eBox.</para>
			  </listitem>
			</orderedlist>
			<para>Then, you should check it to see if it
			is all correct or make the appropriate changes
			and, finally, save it.</para>
		</section>
		<section id="backupList">
			<title>Backups' list</title>
			<para>Backups' list has the eBox backups made during its
			working period. Actions on each element from
			that list, located at the right, let restore a
			backup, download a file with a backup, store
			the backup a removable device (CD/DVD) or
			remove a backup from the eBox.</para>
		</section>
	</section>

	<section id='sect-ebox-halt'>
		<!-- System->Halt/Reboot -->
		<title>System Halt/Reboot</title>

		<para>Our web interface to halt or reboot the computer where eBox is
		installed in, is reachable through
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>Halt/Reboot</guimenuitem>
			</menuchoice>.
		</para>

		<para>You shouldn't forget that if your eBox system is your Internet
		gateway, you will lose connection to the global network meanwhile eBox
		is halt.</para>
	</section>

	<section id='sect-ebox-bug'>
		<!-- System->Bug report -->
		<title>Bug reports generation</title>

		<para>If you find a problem while eBox is running, you can fill a file
		with the bug report at
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>Bug report</guimenuitem>
			</menuchoice>
		and send it by e-mail to support@ebox-platform.com
		</para>
	</section>

	<section id='sect-ebox-datetime'>
		<!-- System->Date/Time -->
		<title>Date/Time Configuration</title>

		<para>You can access to date/time configuration in 
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>Date/Time</guimenuitem>
			</menuchoice>
		and
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>Timezone</guimenuitem>
			</menuchoice>
		.
		</para>
			
		<para>At
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>Date/Time</guimenuitem>
			</menuchoice>
		, you can adjust eBox date and time. There are two different options
		to adjust date and time correctly: by hand, setting as "Disabled" NTP
		Server synchronisation, and using an external NTP Server, setting as
		"Enabled" NTP synchronisation.

		<variablelist>
			<varlistentry>
				<term>By hand</term>
				<listitem>
					<para>If synchronisation with other NTP server
					is disabled, date and time adjust will be
					manual. Selecting corresponding values, shown
					in the page, for system date and time values.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Using another NTP Server</term>
				<listitem>
					<para>If date/time synchronisation with a NTP
					Server is enabled, another configuration will
					be shown, where you can specify until a
					maximum of three NTP Servers where eBox will
					ask for date and time, using current timezone
					from the system configuration.</para>
				</listitem>
			</varlistentry>
		</variablelist>
		</para>

		<para>At
			<menuchoice>
				<guimenu>System</guimenu>
				<guimenuitem>Timezone</guimenuitem>
			</menuchoice>
		you can configure the system timezone. You just need to select you
		geographic zone from the list at the left, and a city from the list at
		the right, both belonging your time zone, and accept your
		configuration.
		</para>

		<warning>
			<para>When you make a change, it is possible your system becomes
			unstable, so you'd better to restart the whole machine after saving changes.
			</para>
		</warning>
	</section>

	<section id="sect-mod-status">
          <title>Module status</title>
          <para>
            Each eBox module status is managed from here instead of
            having to enable every module from one of its configuration
            page. This allows us to have in a single sight which
            modules are enabled analogously the module summary in
            Summary page. Each eBox module is disabled by default
            including base modules such as Network (<xref
            linkend="ch-network"/>) or Firewall (<xref
            linkend="ch-firewall"/>).
          </para>
          <para>
            There are modules which depends on another to be
            enabled. In a typical installation, for example, the squid module has a
            chain of dependencies to be enabled as shown: squid ->
            firewall -> network. So to enable Squid module, firstly
            the dependant modules must be enabled first. A module may
            have multiple module dependencies to work.
          </para>
          <para>
            The first time you enable a module, eBox will ask to
            perform several actions and file modifications that you
            must accept explicitly to enable the module. This is so to
            comply the Debian policy which indicate that every package
            must manage its own data and if it modifies
            configuration/data from other packages the user must
            accept explicitly those modifications. Every action to
            perform has a reason which is explained accordingly.
            Until you save changes, the modules that you may enable
            would not be committed.
           </para>
          <para>
            Every time a user make a modification in an eBox-controlled file, eBox
            will realise that a change may be done when saving
            changes. And it will ask you again to override your
            changes. This monitoring is only done on those modules
            which are enabled. If every configuration setting is done
            through eBox UI, no more dialogues of this kind will be shown.
          </para>
          <para>
            In order to disable a module, just click <guilabel>status</guilabel> column of
            the desired module. If the module is a dependency from
            other modules, this action will disable them as well.
         </para>
        </section>
</chapter>
